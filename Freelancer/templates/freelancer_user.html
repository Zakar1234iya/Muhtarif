<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  {% load static %}
  <link rel="stylesheet" href="{% static 'CSS/freelancer_user.css' %}">
  <title>صفحة المحترف</title>
</head>
<body>
  <header>
    <div class="container">
        <div class="logo">
            <img alt="Logo" height="50" src="https://i.ibb.co/9qVrBv0/logo-page.png" width="100" />
        </div>
        <nav>
            <ul>
              <li><a href="/">الرئيسية</a></li>
              <li><a href="/service">خدماتنا</a></li>
              <li><a href="/About_us/">من نحن</a></li>
              <li><a href="/fqa/">الأسئلة الشائعة</a></li>
              <li><a href="/contact_us/">اتصل بنا</a></li>
            </ul>
        </nav>
        <div class="language-selector"></div>
        <div class="auth-buttons">
            <a href="/logout" class="login-btn">تسجيل خروج</a>
        </div>
    </div>
  </header>

  <main class="content">
    <div class="profile-card">
      <div class="profile-pic">
        {% if freelancer.profile_picture %}
          <img src="{{ freelancer.profile_picture.url }}" alt="Profile Picture" style="width: 100px; height: 100px;">
        {% else %}
          <img src="https://cdn-icons-png.flaticon.com/512/2716/2716808.png" alt="Default Profile Picture" style="width: 100px; height: 100px;">
        {% endif %}
      </div>
      <p class="name">{{ freelancer.fname }} {{ freelancer.lname }}</p>
      <br>
      <br><h3>تقييمك</h3>
      <div class="rating">
        <p>قيمني</p>
        {% with average_rating=freelancer.average_rating|stringformat:"d" %}
          {% for i in "12345" %}
            {% if i|add:"0" < average_rating|add:"0" %}
              <span>⭐</span>
            {% else %}
              <span>☆</span>
            {% endif %}
          {% endfor %}
        {% endwith %}
        <p>متوسط التقييم: {{ freelancer.average_rating }}</p>
      </div>
    </div>
    <div class="task-info">
        <p>عدد المهام المنجزة: {{ completed_tasks }}</p>
        <p>المهنة: {{ freelancer.profession.protag }}</p>
    </div>
    <div class="comment-section">
      <h4>أضف تعليقًا:</h4>
      <form method="POST" action="{% url 'viewfreelancer' freelancer.id %}">
        {% csrf_token %}
        <div class="form-group">
          <textarea class="form-control" name="comment_content" rows="3" placeholder="اكتب تعليقك هنا..."></textarea>
        </div>
        <button type="submit" class="btn btn-primary mt-2">إرسال التعليق</button>
      </form>
      <h4>التعليقات:</h4>
      {% for comment in comments %}
        <div class="comment">
          <p>{{ comment.content }}</p>
          <small>من: {{ comment.creator.fname }} {{ comment.creator.lname }}</small>
          <p>بتاريخ: {{ comment.created_at }}</p>
        </div>
      {% endfor %}
    </div>
  </main>
</body>
</html>
